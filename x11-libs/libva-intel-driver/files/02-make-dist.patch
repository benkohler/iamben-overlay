From 01b39f7ef75c028a99a02e98af6ec9ca2a9c6773 Mon Sep 17 00:00:00 2001
From: Xiang, Haihao <haihao.xiang@intel.com>
Date: Tue, 24 Sep 2013 05:25:37 +0000
Subject: fix the broken package generated by make dist

Signed-off-by: Xiang, Haihao <haihao.xiang@intel.com>
---
diff --git a/configure.ac b/configure.ac
index 1d9ae85..f531c95 100644
--- a/configure.ac
+++ b/configure.ac
@@ -178,6 +178,7 @@ AC_OUTPUT([
     src/shaders/post_processing/Makefile
     src/shaders/post_processing/gen5_6/Makefile
     src/shaders/post_processing/gen7/Makefile
+    src/shaders/post_processing/gen75/Makefile
     src/shaders/render/Makefile
     src/shaders/utils/Makefile
     src/shaders/vme/Makefile
diff --git a/src/Makefile.am b/src/Makefile.am
index 3299733..edf8f4e 100755
--- a/src/Makefile.am
+++ b/src/Makefile.am
@@ -138,6 +138,7 @@ driver_cflags			+= $(WAYLAND_CFLAGS)
 endif
 
 # Wayland protocol
+protocol_source_h = wayland-drm-client-protocol.h
 i965_output_wayland.c: $(protocol_source_h)
 @wayland_scanner_rules@
 
diff --git a/src/shaders/post_processing/Makefile.am b/src/shaders/post_processing/Makefile.am
index b19020f..a0022ca 100644
--- a/src/shaders/post_processing/Makefile.am
+++ b/src/shaders/post_processing/Makefile.am
@@ -1,4 +1,4 @@
-SUBDIRS = gen5_6 gen7
+SUBDIRS = gen5_6 gen7 gen75
 
 # Extra clean files so that maintainer-clean removes *everything*
 MAINTAINERCLEANFILES = Makefile.in
diff --git a/src/shaders/post_processing/gen75/Makefile.am b/src/shaders/post_processing/gen75/Makefile.am
new file mode 100644
index 0000000..cdad1d9
--- a/dev/null
+++ b/src/shaders/post_processing/gen75/Makefile.am
@@ -0,0 +1,9 @@
+INTEL_PP_PRE_G75B =		\
+	sharpening_h_blur.g75b	\
+	sharpening_unmask.g75b	\
+	sharpening_v_blur.g75b
+
+EXTRA_DIST = $(INTEL_PP_PRE_G75B)
+
+# Extra clean files so that maintainer-clean removes *everything*
+MAINTAINERCLEANFILES = Makefile.in
diff --git a/src/shaders/vme/Makefile.am b/src/shaders/vme/Makefile.am
index 096cee4..867a93c 100644
--- a/src/shaders/vme/Makefile.am
+++ b/src/shaders/vme/Makefile.am
@@ -68,6 +68,7 @@ EXTRA_DIST = \
 	$(INTEL_GEN75_INC)	\
 	$(INTEL_GEN7_INC)	\
 	$(VME75_CORE)		\
+	$(VME7_CORE)		\
 	$(VME_CORE)		\
 	$(NULL)
 
--
cgit v0.9.0.2-2-gbebe
